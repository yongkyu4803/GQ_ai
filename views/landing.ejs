<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <meta name="description" content="<%= description %>">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Critical CSS inline for initial render -->
    <style>
        /* Critical Bootstrap Grid & Utilities */
        *,::after,::before{box-sizing:border-box}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:1rem;line-height:1.5;color:#212529;background-color:#fff}.container{width:100%;padding-right:var(--bs-gutter-x,.75rem);padding-left:var(--bs-gutter-x,.75rem);margin-right:auto;margin-left:auto}@media (min-width:576px){.container{max-width:540px}}@media (min-width:768px){.container{max-width:720px}}@media (min-width:992px){.container{max-width:960px}}@media (min-width:1200px){.container{max-width:1140px}}@media (min-width:1400px){.container{max-width:1320px}}.row{--bs-gutter-x:1.5rem;--bs-gutter-y:0;display:flex;flex-wrap:wrap;margin-top:calc(-1 * var(--bs-gutter-y));margin-right:calc(-.5 * var(--bs-gutter-x));margin-left:calc(-.5 * var(--bs-gutter-x))}.row>*{flex-shrink:0;width:100%;max-width:100%;padding-right:calc(var(--bs-gutter-x) * .5);padding-left:calc(var(--bs-gutter-x) * .5);margin-top:var(--bs-gutter-y)}.col-12{flex:0 0 auto;width:100%}@media (min-width:768px){.col-md-4{flex:0 0 auto;width:33.33333333%}.col-md-6{flex:0 0 auto;width:50%}}@media (min-width:992px){.col-lg-4{flex:0 0 auto;width:33.33333333%}.col-lg-8{flex:0 0 auto;width:66.66666667%}}.justify-content-center{justify-content:center!important}.text-center{text-align:center!important}.g-3{--bs-gutter-x:1rem;--bs-gutter-y:1rem}.g-4{--bs-gutter-x:1.5rem;--bs-gutter-y:1.5rem}.mb-3{margin-bottom:1rem!important}.ms-3{margin-left:1rem!important}.btn{display:inline-block;font-weight:400;line-height:1.5;text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;user-select:none;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out}.img-fluid{max-width:100%;height:auto}
        /* Critical layout to prevent CLS */
        .hero-section{min-height:400px}.service-card{min-height:500px}.card-image{position:relative;padding-top:56.25%;overflow:hidden}.card-image img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}
    </style>

    <!-- Non-critical CSS loaded asynchronously -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="stylesheet" href="/css/landing.css">

    <!-- Fallback for no-JS -->
    <noscript>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css">
    </noscript>

    <!-- ì¹´ë“œ ì œëª© ë°œê´‘ íš¨ê³¼ -->
    <style>
        .card-title {
            text-shadow:
                0 0 10px rgba(6, 182, 212, 0.3),
                0 0 20px rgba(6, 182, 212, 0.2),
                0 0 30px rgba(6, 182, 212, 0.1) !important;
            transition: all 0.3s ease !important;
        }

        .service-card:hover .card-title {
            text-shadow:
                0 0 15px rgba(6, 182, 212, 0.5),
                0 0 25px rgba(6, 182, 212, 0.3),
                0 0 35px rgba(6, 182, 212, 0.2) !important;
        }
    </style>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
    <!-- Hero Section -->
    <div class="hero-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="hero-content">
                        <div class="brand-container">
                            <h1 class="hero-title">
                                <span class="text-gradient">GQ AI</span>
                            </h1>
                        </div>
                        <p class="hero-description">
                            ì²´ê³„ì ì¸ í•™ìŠµë¶€í„° ì‹¤ë¬´ í”„ë¡¬í”„íŠ¸ê¹Œì§€, AI ì‹œëŒ€ì˜ í•„ìˆ˜ ì—­ëŸ‰ì„ í‚¤ì›Œë³´ì„¸ìš”
                        </p>
                        <div class="hero-actions">
                            <a href="/education-inquiry" class="btn btn-primary btn-cta">
                                <i class="fas fa-graduation-cap"></i>
                                êµìœ¡ ë¬¸ì˜
                            </a>
                            <a href="/legislative-assistant-program" class="btn btn-secondary btn-cta ms-3">
                                <i class="fas fa-users"></i>
                                ë³´ì¢Œì§„ì „ë¬¸ê³¼ì •
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Cards Section -->
    <div class="main-cards-section" style="background: linear-gradient(180deg, #535480 0%, whitesmoke 100%) !important;">
        <div class="container">
            <div class="row justify-content-center g-4">
                <!-- AI ëŸ¬ë‹ í”Œë«í¼ ì¹´ë“œ -->
                <div class="col-lg-4 col-md-6">
                    <a href="/learning" class="card-link">
                        <div class="service-card learning-card">
                            <div class="card-image">
                                <img src="/images/landing/ai-learning-card.jpg"
                                     alt="AI ëŸ¬ë‹ í”Œë«í¼"
                                     class="img-fluid"
                                     loading="eager"
                                     width="400"
                                     height="225"
                                     decoding="async">
                                <div class="card-overlay">
                                    <i class="fas fa-graduation-cap card-icon"></i>
                                </div>
                            </div>
                            <div class="card-content">
                                <h3 class="card-title">AI Learning Platform</h3>
                                <p class="card-description">
                                    ì²´ê³„ì  AI í•™ìŠµ í”„ë¡œê·¸ë¨
                                </p>
                                <div class="card-features">
                                    <span class="feature-tag">
                                        <i class="fas fa-book-open"></i> 15ê°œ ê°•ì˜
                                    </span>
                                    <span class="feature-tag">
                                        <i class="fas fa-quiz"></i> ì§„ë‹¨í‰ê°€
                                    </span>
                                </div>
                                <div class="card-action">
                                    <span class="btn-text">í•™ìŠµ ì‹œì‘í•˜ê¸°</span>
                                    <i class="fas fa-arrow-right"></i>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>

                <!-- í”„ë¡¬í”„íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¹´ë“œ -->
                <div class="col-lg-4 col-md-6">
                    <a href="/prompt" class="card-link">
                        <div class="service-card prompt-card">
                            <div class="card-image">
                                <img src="/images/landing/prompt-library-card.jpg"
                                     alt="í”„ë¡¬í”„íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬"
                                     class="img-fluid"
                                     loading="eager"
                                     width="400"
                                     height="225"
                                     decoding="async">
                                <div class="card-overlay">
                                    <i class="fas fa-magic card-icon"></i>
                                </div>
                            </div>
                            <div class="card-content">
                                <h3 class="card-title">Prompt Library</h3>
                                <p class="card-description">
                                    ì „ë¬¸ í”„ë¡¬í”„íŠ¸ ì»¬ë ‰ì…˜
                                </p>
                                <div class="card-features">
                                    <span class="feature-tag">
                                        <i class="fas fa-database"></i> Prompt DB
                                    </span>
                                    <span class="feature-tag">
                                        <i class="fas fa-tools"></i> í”„ë¡¬í”„íŠ¸ í•™ìŠµ ì‹œìŠ¤í…œ
                                    </span>
                                </div>
                                <div class="card-action">
                                    <span class="btn-text">ë¼ì´ë¸ŒëŸ¬ë¦¬ ì ‘ì†</span>
                                    <i class="fas fa-external-link-alt"></i>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>

                <!-- í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° ì¹´ë“œ -->
                <div class="col-lg-4 col-md-6">
                    <a href="/genpro" class="card-link">
                        <div class="service-card generator-card">
                            <div class="card-image">
                                <img src="/images/landing/genpro.png"
                                     alt="Prompt Generator"
                                     class="img-fluid"
                                     loading="eager"
                                     width="400"
                                     height="225"
                                     decoding="async">
                                <div class="card-overlay">
                                    <i class="fas fa-cogs card-icon"></i>
                                </div>
                            </div>
                            <div class="card-content">
                                <h3 class="card-title" style="color: #007bff;">Prompt Generator</h3>
                                <p class="card-description">
                                    êµ­íšŒì—…ë¬´ìš© í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°
                                </p>
                                <div class="card-features">
                                    <span class="feature-tag">
                                        <i class="fas fa-landmark"></i> êµ­íšŒì—…ë¬´
                                    </span>
                                    <span class="feature-tag">
                                        <i class="fas fa-robot"></i> ìë™ ìƒì„±
                                    </span>
                                </div>
                                <div class="card-action">
                                    <span class="btn-text">ìƒì„±ê¸° ì´ìš©</span>
                                    <i class="fas fa-arrow-right"></i>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Sub Services Section -->
    <div class="sub-services-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="row g-3">
                        <!-- í™•ì¥ ê°€ëŠ¥í•œ ì„œë¸Œ ë²„íŠ¼ ì˜ì—­ -->
                        <div class="col-md-4">
                            <a href="/news" class="sub-service-btn" data-bg-image="/images/landing/newslens_logo_002.png">
                                <div class="sub-service-content">
                                    <h2 class="sub-service-title">ë‹¨ë…&ë­í‚¹ë‰´ìŠ¤</h2>
                                    <h4 class="sub-service-description">ì‹¤ì‹œê°„ ë‹¨ë…ë‰´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.<br> ë¶€ë¡: êµ­íšŒì•ì‹ë‹¹ ì •ë³´</h4>
                                </div>
                            </a>
                        </div>
                        <!-- ì¶”í›„ í™•ì¥ì„ ìœ„í•œ ì£¼ì„ ì˜ì—­ -->
                        <div class="col-md-4">
                            <a href="https://www.gqai.kr/quiz" class="sub-service-btn" data-bg-image="/images/landing/quiz.png">
                                <div class="sub-service-content">
                                    <h2 class="sub-service-title">AIì§„ë‹¨í‰ê°€</h2>
                                    <h4 class="sub-service-description">ìƒì„±í˜• AI ì—­ëŸ‰ í‰ê°€ë¥¼ í•´ë³´ì„¸ìš”!</h4>
                                </div>
                            </a>
                        </div>
                        <!-- ì¶”í›„ í™•ì¥ì„ ìœ„í•œ ì£¼ì„ ì˜ì—­ -->
                        <div class="col-md-4">
                            <a href="https://newsletter.gqai.kr/" class="sub-service-btn">
                                <div class="sub-service-content">
                                    <h2 class="sub-service-title">ë‰´ìŠ¤ë ˆí„°</h2>
                                    <h4 class="sub-service-description">ë‰´ìŠ¤ë ˆí„°ë¥¼ ë¹ ë¥´ê²Œ ì œì‘í•´ë³´ì„¸ìš”</h4>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="landing-footer">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center">
                    <!-- ë°©ë¬¸ì í†µê³„ -->
                    <div class="visitor-stats-landing mb-3">
                        <div class="row justify-content-center">
                            <div class="col-auto">
                                <div class="stat-item">
                                    <div class="stat-label">ì´ ë°©ë¬¸ì</div>
                                    <div class="stat-number" id="landing-total-visitors">-</div>
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="stat-item">
                                    <div class="stat-label">ì˜¤ëŠ˜ ë°©ë¬¸</div>
                                    <div class="stat-number" id="landing-daily-visitors">-</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <p class="footer-text">&copy; 2024 GQ AI. ìƒì„±í˜• AI ì „ë¬¸ êµìœ¡ í”Œë«í¼</p>
                    <div class="footer-links">
                        <a href="/contact">ë¬¸ì˜í•˜ê¸°</a>
                        <span>|</span>
                        <a href="/qna">FAQ</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript - Deferred for performance -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
    <script>
        // ë°©ë¬¸ì ì¹´ìš´íŠ¸ ë¡œë“œ (ëœë”© í˜ì´ì§€ìš©) - ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ì´ˆê¸° ë Œë”ë§ ì°¨ë‹¨ ë°©ì§€
        async function loadLandingVisitorCounts() {
            try {
                const response = await fetch('/api/visitors');
                const data = await response.json();
                
                // ë°ì´í„° ê²€ì¦ ë° ì•ˆì „í•œ í‘œì‹œ
                const totalVisitors = data && typeof data.totalVisitors === 'number' ? data.totalVisitors : 0;
                const dailyVisitors = data && typeof data.dailyVisitors === 'number' ? data.dailyVisitors : 0;
                
                // ëœë”© í˜ì´ì§€ì˜ ë°©ë¬¸ì í†µê³„ ì—…ë°ì´íŠ¸
                const landingTotalElement = document.getElementById('landing-total-visitors');
                const landingDailyElement = document.getElementById('landing-daily-visitors');
                
                if (landingTotalElement) {
                    landingTotalElement.textContent = totalVisitors.toLocaleString();
                }
                if (landingDailyElement) {
                    landingDailyElement.textContent = dailyVisitors.toLocaleString();
                }
                
                // ê°œë°œ ëª¨ë“œ í‘œì‹œ (ì½˜ì†”ì—ì„œë§Œ)
                if (data && data.mode === 'local-memory') {
                    console.log('ğŸ  ë¡œì»¬ ê°œë°œ ëª¨ë“œ: ë©”ëª¨ë¦¬ ì €ì¥ì†Œ ì‚¬ìš© ì¤‘');
                } else if (data && data.mode === 'vercel-kv') {
                    console.log('â˜ï¸ Vercel KV ëª¨ë“œ: í´ë¼ìš°ë“œ ì €ì¥ì†Œ ì‚¬ìš© ì¤‘');
                }
                
                if (data && data.error) {
                    console.warn('âš ï¸ ë°©ë¬¸ì ì¹´ìš´í„° ì˜¤ë¥˜:', data.error);
                }
            } catch (error) {
                console.error('Failed to load visitor counts:', error);
                const landingTotalElement = document.getElementById('landing-total-visitors');
                const landingDailyElement = document.getElementById('landing-daily-visitors');
                
                if (landingTotalElement) landingTotalElement.textContent = '0';
                if (landingDailyElement) landingDailyElement.textContent = '0';
            }
        }

        // ì¹´ë“œ í˜¸ë²„ íš¨ê³¼ ë° ì• ë‹ˆë©”ì´ì…˜ - requestAnimationFrameìœ¼ë¡œ ìµœì í™”
        document.addEventListener('DOMContentLoaded', function() {
            // ë°©ë¬¸ì ì¹´ìš´íŠ¸ ë¹„ë™ê¸° ë¡œë“œ (ë‚®ì€ ìš°ì„ ìˆœìœ„)
            if ('requestIdleCallback' in window) {
                requestIdleCallback(() => loadLandingVisitorCounts());
            } else {
                setTimeout(loadLandingVisitorCounts, 1000);
            }

            // ì¹´ë“œ í˜¸ë²„ íš¨ê³¼ - transformìœ¼ë¡œ GPU ê°€ì† í™œìš©
            const cards = document.querySelectorAll('.service-card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-10px) scale(1.02)';
                });
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });

            // í˜ì´ì§€ ë¡œë“œ ì‹œ ì• ë‹ˆë©”ì´ì…˜ - Intersection Observerë¡œ ìµœì í™”
            const heroContent = document.querySelector('.hero-content');
            const serviceCards = document.querySelectorAll('.service-card');

            // ì¦‰ì‹œ ë³´ì´ëŠ” ì˜ì—­ë§Œ ì• ë‹ˆë©”ì´ì…˜
            if (heroContent) {
                requestAnimationFrame(() => {
                    heroContent.style.opacity = '1';
                    heroContent.style.transform = 'translateY(0)';
                });
            }

            // ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜ - ë·°í¬íŠ¸ ì§„ì… ì‹œì—ë§Œ ì‹¤í–‰
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.style.opacity = '1';
                            entry.target.style.transform = 'translateY(0)';
                        }, index * 100);
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            serviceCards.forEach(card => observer.observe(card));

            // ì„œë¸Œ ì„œë¹„ìŠ¤ ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼
            const subServiceBtns = document.querySelectorAll('.sub-service-btn[data-bg-image]');
            subServiceBtns.forEach(btn => {
                const bgImage = btn.getAttribute('data-bg-image');
                btn.addEventListener('mouseenter', function() {
                    this.style.backgroundImage = `url('${bgImage}')`;
                    this.classList.add('hover-bg');
                });
                btn.addEventListener('mouseleave', function() {
                    this.style.backgroundImage = '';
                    this.classList.remove('hover-bg');
                });
            });
        });
    </script>
</body>
</html>